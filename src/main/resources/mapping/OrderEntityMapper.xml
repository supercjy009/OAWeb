<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="demo.mapper.OrderEntityMapper">
    <resultMap id="BaseResultMap" type="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="service_id" jdbcType="VARCHAR" property="serviceId"/>
        <result column="service_name" jdbcType="VARCHAR" property="serviceName"/>
        <result column="get_order_date" jdbcType="TIMESTAMP" property="getOrderDate"/>
        <result column="customer_im" jdbcType="VARCHAR" property="customerIm"/>
        <result column="order_number" jdbcType="VARCHAR" property="orderNumber"/>
        <result column="delivery_date" jdbcType="TIMESTAMP" property="deliveryDate"/>
        <result column="customer_mail" jdbcType="VARCHAR" property="customerMail"/>
        <result column="order_content" jdbcType="VARCHAR" property="orderContent"/>
        <result column="order_price" jdbcType="VARCHAR" property="orderPrice"/>
        <result column="pay_state" jdbcType="VARCHAR" property="payState"/>
        <result column="pay_progress" jdbcType="VARCHAR" property="payProgress"/>
        <result column="due_date" jdbcType="TIMESTAMP" property="dueDate"/>
        <result column="due_money" jdbcType="VARCHAR" property="dueMoney"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="recommend_im" jdbcType="VARCHAR" property="recommendIm"/>
        <result column="customer_account" jdbcType="VARCHAR" property="customerAccount"/>
        <result column="refund_way" jdbcType="VARCHAR" property="refundWay"/>
        <result column="refund_money" jdbcType="VARCHAR" property="refundMoney"/>
        <result column="refund_date" jdbcType="TIMESTAMP" property="refundDate"/>
        <result column="refund_remark" jdbcType="VARCHAR" property="refundRemark"/>
        <result column="audit" jdbcType="VARCHAR" property="audit"/>
        <result column="part_name" jdbcType="VARCHAR" property="partName"/>
    </resultMap>

    <resultMap id="AllResultMap" type="demo.dto.OrderResDto">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="service_id" jdbcType="VARCHAR" property="serviceId"/>
        <result column="service_name" jdbcType="VARCHAR" property="serviceName"/>
        <result column="get_order_date" jdbcType="TIMESTAMP" property="getOrderDate"/>
        <result column="customer_im" jdbcType="VARCHAR" property="customerIm"/>
        <result column="order_number" jdbcType="VARCHAR" property="orderNumber"/>
        <result column="delivery_date" jdbcType="TIMESTAMP" property="deliveryDate"/>
        <result column="customer_mail" jdbcType="VARCHAR" property="customerMail"/>
        <result column="order_content" jdbcType="VARCHAR" property="orderContent"/>
        <result column="order_price" jdbcType="VARCHAR" property="orderPrice"/>
        <result column="pay_state" jdbcType="VARCHAR" property="payState"/>
        <result column="pay_progress" jdbcType="VARCHAR" property="payProgress"/>
        <result column="due_date" jdbcType="TIMESTAMP" property="dueDate"/>
        <result column="due_money" jdbcType="VARCHAR" property="dueMoney"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="recommend_im" jdbcType="VARCHAR" property="recommendIm"/>
        <result column="customer_account" jdbcType="VARCHAR" property="customerAccount"/>
        <result column="refund_way" jdbcType="VARCHAR" property="refundWay"/>
        <result column="refund_money" jdbcType="VARCHAR" property="refundMoney"/>
        <result column="refund_date" jdbcType="TIMESTAMP" property="refundDate"/>
        <result column="refund_remark" jdbcType="VARCHAR" property="refundRemark"/>
        <result column="audit" jdbcType="VARCHAR" property="audit"/>
        <result column="part_name" jdbcType="VARCHAR" property="partName"/>
        <collection property="partTimes" ofType="demo.model.PartTimeEntity">
            <result column="part_qq" jdbcType="TIMESTAMP" property="partQq"/>
            <result column="submit_state" jdbcType="VARCHAR" property="submitState"/>
            <result column="part_phone" jdbcType="TIMESTAMP" property="partPhone"/>
            <result column="part_alipay" jdbcType="VARCHAR" property="partAlipay"/>
            <result column="part_money" jdbcType="VARCHAR" property="partMoney"/>
            <result column="deduct" jdbcType="VARCHAR" property="deduct"/>
            <result column="settle_date" jdbcType="TIMESTAMP" property="settleDate"/>
            <result column="part_remark" jdbcType="VARCHAR" property="partRemark"/>
            <result column="part_audit" jdbcType="VARCHAR" property="partAudit"/>
            <result column="part_settle_state" jdbcType="VARCHAR" property="partSettleState"/>
            <result column="finance_remark" jdbcType="VARCHAR" property="financeRemark"/>
        </collection>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, service_id, service_name, get_order_date, customer_im, order_number, delivery_date,
        customer_mail, order_content, order_price, pay_state, pay_progress, due_date, due_money,
        remark, recommend_im, customer_account, refund_way, refund_money, refund_date, refund_remark,
        audit, part_name
    </sql>

    <sql id="All_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        o.id, o.service_id, o.service_name, o.get_order_date, o.customer_im, o.order_number, o.delivery_date,
        o.customer_mail, o.order_content, o.order_price, o.pay_state, o.pay_progress, o.due_date, o.due_money,
        o.remark, o.recommend_im, o.customer_account, o.refund_way, o.refund_money, o.refund_date, o.refund_remark,
        o.audit, o.part_name,p.id, p.part_qq, p.submit_state, p.part_phone, p.part_alipay, p.part_money, p.deduct,
        p.settle_date,p.part_remark, p.part_audit, p.part_settle_state,
        p.finance_remark,p.order_number,p.service_name,p.send_service_name
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from oa_order
        where id = #{id,jdbcType=BIGINT}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from oa_order
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into oa_order (id, service_id, service_name,
        get_order_date, customer_im, order_number,
        delivery_date, customer_mail, order_content,
        order_price, pay_state, pay_progress,
        due_date, due_money, remark,
        recommend_im, customer_account, refund_way,
        refund_money, refund_date, refund_remark,
        audit, part_name)
        values (#{id,jdbcType=BIGINT}, #{serviceId,jdbcType=VARCHAR}, #{serviceName,jdbcType=VARCHAR},
        #{getOrderDate,jdbcType=TIMESTAMP}, #{customerIm,jdbcType=VARCHAR}, #{orderNumber,jdbcType=VARCHAR},
        #{deliveryDate,jdbcType=TIMESTAMP}, #{customerMail,jdbcType=VARCHAR}, #{orderContent,jdbcType=VARCHAR},
        #{orderPrice,jdbcType=VARCHAR}, #{payState,jdbcType=VARCHAR}, #{payProgress,jdbcType=VARCHAR},
        #{dueDate,jdbcType=TIMESTAMP}, #{dueMoney,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR},
        #{recommendIm,jdbcType=VARCHAR}, #{customerAccount,jdbcType=VARCHAR}, #{refundWay,jdbcType=VARCHAR},
        #{refundMoney,jdbcType=VARCHAR}, #{refundDate,jdbcType=TIMESTAMP}, #{refundRemark,jdbcType=VARCHAR},
        #{audit,jdbcType=VARCHAR}, #{partName,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into oa_order
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="serviceId != null">
                service_id,
            </if>
            <if test="serviceName != null">
                service_name,
            </if>
            <if test="getOrderDate != null">
                get_order_date,
            </if>
            <if test="customerIm != null">
                customer_im,
            </if>
            <if test="orderNumber != null">
                order_number,
            </if>
            <if test="deliveryDate != null">
                delivery_date,
            </if>
            <if test="customerMail != null">
                customer_mail,
            </if>
            <if test="orderContent != null">
                order_content,
            </if>
            <if test="orderPrice != null">
                order_price,
            </if>
            <if test="payState != null">
                pay_state,
            </if>
            <if test="payProgress != null">
                pay_progress,
            </if>
            <if test="dueDate != null">
                due_date,
            </if>
            <if test="dueMoney != null">
                due_money,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="recommendIm != null">
                recommend_im,
            </if>
            <if test="customerAccount != null">
                customer_account,
            </if>
            <if test="refundWay != null">
                refund_way,
            </if>
            <if test="refundMoney != null">
                refund_money,
            </if>
            <if test="refundDate != null">
                refund_date,
            </if>
            <if test="refundRemark != null">
                refund_remark,
            </if>
            <if test="audit != null">
                audit,
            </if>
            <if test="partName != null">
                part_name,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="serviceId != null">
                #{serviceId,jdbcType=VARCHAR},
            </if>
            <if test="serviceName != null">
                #{serviceName,jdbcType=VARCHAR},
            </if>
            <if test="getOrderDate != null">
                #{getOrderDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerIm != null">
                #{customerIm,jdbcType=VARCHAR},
            </if>
            <if test="orderNumber != null">
                #{orderNumber,jdbcType=VARCHAR},
            </if>
            <if test="deliveryDate != null">
                #{deliveryDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerMail != null">
                #{customerMail,jdbcType=VARCHAR},
            </if>
            <if test="orderContent != null">
                #{orderContent,jdbcType=VARCHAR},
            </if>
            <if test="orderPrice != null">
                #{orderPrice,jdbcType=VARCHAR},
            </if>
            <if test="payState != null">
                #{payState,jdbcType=VARCHAR},
            </if>
            <if test="payProgress != null">
                #{payProgress,jdbcType=VARCHAR},
            </if>
            <if test="dueDate != null">
                #{dueDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dueMoney != null">
                #{dueMoney,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=VARCHAR},
            </if>
            <if test="recommendIm != null">
                #{recommendIm,jdbcType=VARCHAR},
            </if>
            <if test="customerAccount != null">
                #{customerAccount,jdbcType=VARCHAR},
            </if>
            <if test="refundWay != null">
                #{refundWay,jdbcType=VARCHAR},
            </if>
            <if test="refundMoney != null">
                #{refundMoney,jdbcType=VARCHAR},
            </if>
            <if test="refundDate != null">
                #{refundDate,jdbcType=TIMESTAMP},
            </if>
            <if test="refundRemark != null">
                #{refundRemark,jdbcType=VARCHAR},
            </if>
            <if test="audit != null">
                #{audit,jdbcType=VARCHAR},
            </if>
            <if test="partName != null">
                #{partName,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update oa_order
        <set>
            <if test="serviceId != null">
                service_id = #{serviceId,jdbcType=VARCHAR},
            </if>
            <if test="serviceName != null">
                service_name = #{serviceName,jdbcType=VARCHAR},
            </if>
            <if test="getOrderDate != null">
                get_order_date = #{getOrderDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerIm != null">
                customer_im = #{customerIm,jdbcType=VARCHAR},
            </if>
            <if test="orderNumber != null">
                order_number = #{orderNumber,jdbcType=VARCHAR},
            </if>
            <if test="deliveryDate != null">
                delivery_date = #{deliveryDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerMail != null">
                customer_mail = #{customerMail,jdbcType=VARCHAR},
            </if>
            <if test="orderContent != null">
                order_content = #{orderContent,jdbcType=VARCHAR},
            </if>
            <if test="orderPrice != null">
                order_price = #{orderPrice,jdbcType=VARCHAR},
            </if>
            <if test="payState != null">
                pay_state = #{payState,jdbcType=VARCHAR},
            </if>
            <if test="payProgress != null">
                pay_progress = #{payProgress,jdbcType=VARCHAR},
            </if>
            <if test="dueDate != null">
                due_date = #{dueDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dueMoney != null">
                due_money = #{dueMoney,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="recommendIm != null">
                recommend_im = #{recommendIm,jdbcType=VARCHAR},
            </if>
            <if test="customerAccount != null">
                customer_account = #{customerAccount,jdbcType=VARCHAR},
            </if>
            <if test="refundWay != null">
                refund_way = #{refundWay,jdbcType=VARCHAR},
            </if>
            <if test="refundMoney != null">
                refund_money = #{refundMoney,jdbcType=VARCHAR},
            </if>
            <if test="refundDate != null">
                refund_date = #{refundDate,jdbcType=TIMESTAMP},
            </if>
            <if test="refundRemark != null">
                refund_remark = #{refundRemark,jdbcType=VARCHAR},
            </if>
            <if test="audit != null">
                audit = #{audit,jdbcType=VARCHAR},
            </if>
            <if test="partName != null">
                part_name = #{partName,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update oa_order
        set service_id = #{serviceId,jdbcType=VARCHAR},
        service_name = #{serviceName,jdbcType=VARCHAR},
        get_order_date = #{getOrderDate,jdbcType=TIMESTAMP},
        customer_im = #{customerIm,jdbcType=VARCHAR},
        order_number = #{orderNumber,jdbcType=VARCHAR},
        delivery_date = #{deliveryDate,jdbcType=TIMESTAMP},
        customer_mail = #{customerMail,jdbcType=VARCHAR},
        order_content = #{orderContent,jdbcType=VARCHAR},
        order_price = #{orderPrice,jdbcType=VARCHAR},
        pay_state = #{payState,jdbcType=VARCHAR},
        pay_progress = #{payProgress,jdbcType=VARCHAR},
        due_date = #{dueDate,jdbcType=TIMESTAMP},
        due_money = #{dueMoney,jdbcType=VARCHAR},
        remark = #{remark,jdbcType=VARCHAR},
        recommend_im = #{recommendIm,jdbcType=VARCHAR},
        customer_account = #{customerAccount,jdbcType=VARCHAR},
        refund_way = #{refundWay,jdbcType=VARCHAR},
        refund_money = #{refundMoney,jdbcType=VARCHAR},
        refund_date = #{refundDate,jdbcType=TIMESTAMP},
        refund_remark = #{refundRemark,jdbcType=VARCHAR},
        audit = #{audit,jdbcType=VARCHAR},
        part_name = #{partName,jdbcType=VARCHAR}
        where id = #{id,jdbcType=BIGINT}
    </update>

    <!-- 这个方法是我自己加的 -->
    <select id="selectAllOrder" resultMap="AllResultMap" parameterType="demo.dto.WorkPayReqVo">
        select
        <include refid="All_Column_List"/>
        from oa_order o left join oa_part_time p on o.order_number = p.order_number
        <where>
            <if test="payDate != null">
                <![CDATA[`get_order_date` <= DATE_ADD(#{payDate, jdbcType=TIMESTAMP},INTERVAL 1 MONTH ) AND `get_order_date` >= #{payDate, jdbcType=TIMESTAMP}]]>
            </if>

            <if test="partName != null and partName !=''">
                part_name = #{partName,jdbcType=VARCHAR}
            </if>

        </where>
        order by o.get_order_date desc
    </select>
</mapper>