<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="demo.mapper.OrderEntityMapper">
    <resultMap id="BaseResultMap" type="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="service_id" jdbcType="VARCHAR" property="serviceId"/>
        <result column="service_name" jdbcType="VARCHAR" property="serviceName"/>
        <result column="get_order_date" jdbcType="TIMESTAMP" property="getOrderDate"/>
        <result column="customer_im" jdbcType="VARCHAR" property="customerIm"/>
        <result column="order_number" jdbcType="VARCHAR" property="orderNumber"/>
        <result column="delivery_date" jdbcType="TIMESTAMP" property="deliveryDate"/>
        <result column="customer_mail" jdbcType="VARCHAR" property="customerMail"/>
        <result column="order_content" jdbcType="VARCHAR" property="orderContent"/>
        <result column="order_price" jdbcType="VARCHAR" property="orderPrice"/>
        <result column="pay_state" jdbcType="VARCHAR" property="payState"/>
        <result column="pay_progress" jdbcType="VARCHAR" property="payProgress"/>
        <result column="due_date" jdbcType="TIMESTAMP" property="dueDate"/>
        <result column="due_money" jdbcType="VARCHAR" property="dueMoney"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="recommend_im" jdbcType="VARCHAR" property="recommendIm"/>
        <result column="customer_account" jdbcType="VARCHAR" property="customerAccount"/>
        <result column="refund_way" jdbcType="VARCHAR" property="refundWay"/>
        <result column="refund_money" jdbcType="VARCHAR" property="refundMoney"/>
        <result column="refund_date" jdbcType="TIMESTAMP" property="refundDate"/>
        <result column="refund_remark" jdbcType="VARCHAR" property="refundRemark"/>
        <result column="audit" jdbcType="VARCHAR" property="audit"/>
        <result column="part_name" jdbcType="VARCHAR" property="partName"/>
    </resultMap>

    <!--<resultMap id="AllResultMap" type="demo.model.dto.OrderResDto">-->
    <!--&lt;!&ndash;-->
    <!--WARNING - @mbg.generated-->
    <!--This element is automatically generated by MyBatis Generator, do not modify.-->
    <!--&ndash;&gt;-->
    <!--<id column="id" jdbcType="BIGINT" property="id"/>-->
    <!--<result column="service_id" jdbcType="VARCHAR" property="serviceId"/>-->
    <!--<result column="service_name" jdbcType="VARCHAR" property="serviceName"/>-->
    <!--<result column="get_order_date" jdbcType="TIMESTAMP" property="getOrderDate"/>-->
    <!--<result column="customer_im" jdbcType="VARCHAR" property="customerIm"/>-->
    <!--<result column="order_number" jdbcType="VARCHAR" property="orderNumber"/>-->
    <!--<result column="delivery_date" jdbcType="TIMESTAMP" property="deliveryDate"/>-->
    <!--<result column="customer_mail" jdbcType="VARCHAR" property="customerMail"/>-->
    <!--<result column="order_content" jdbcType="VARCHAR" property="orderContent"/>-->
    <!--<result column="order_price" jdbcType="VARCHAR" property="orderPrice"/>-->
    <!--<result column="pay_state" jdbcType="VARCHAR" property="payState"/>-->
    <!--<result column="pay_progress" jdbcType="VARCHAR" property="payProgress"/>-->
    <!--<result column="due_date" jdbcType="TIMESTAMP" property="dueDate"/>-->
    <!--<result column="due_money" jdbcType="VARCHAR" property="dueMoney"/>-->
    <!--<result column="remark" jdbcType="VARCHAR" property="remark"/>-->
    <!--<result column="recommend_im" jdbcType="VARCHAR" property="recommendIm"/>-->
    <!--<result column="customer_account" jdbcType="VARCHAR" property="customerAccount"/>-->
    <!--<result column="refund_way" jdbcType="VARCHAR" property="refundWay"/>-->
    <!--<result column="refund_money" jdbcType="VARCHAR" property="refundMoney"/>-->
    <!--<result column="refund_date" jdbcType="TIMESTAMP" property="refundDate"/>-->
    <!--<result column="refund_remark" jdbcType="VARCHAR" property="refundRemark"/>-->
    <!--<result column="audit" jdbcType="VARCHAR" property="audit"/>-->
    <!--<result column="part_name" jdbcType="VARCHAR" property="partName"/>-->
    <!--<collection property="partTimes" ofType="demo.model.PartTimeEntity">-->
    <!--<result column="part_id" jdbcType="TIMESTAMP" property="id"/>-->
    <!--<result column="part_qq" jdbcType="TIMESTAMP" property="partQq"/>-->
    <!--<result column="submit_state" jdbcType="VARCHAR" property="submitState"/>-->
    <!--<result column="part_phone" jdbcType="TIMESTAMP" property="partPhone"/>-->
    <!--<result column="part_alipay" jdbcType="VARCHAR" property="partAlipay"/>-->
    <!--<result column="part_money" jdbcType="VARCHAR" property="partMoney"/>-->
    <!--<result column="deduct" jdbcType="VARCHAR" property="deduct"/>-->
    <!--<result column="settle_date" jdbcType="TIMESTAMP" property="settleDate"/>-->
    <!--<result column="part_remark" jdbcType="VARCHAR" property="partRemark"/>-->
    <!--<result column="part_audit" jdbcType="VARCHAR" property="partAudit"/>-->
    <!--<result column="part_settle_state" jdbcType="VARCHAR" property="partSettleState"/>-->
    <!--<result column="finance_remark" jdbcType="VARCHAR" property="financeRemark"/>-->
    <!--</collection>-->
    <!--</resultMap>-->

    <resultMap id="PartOrderResultMap" type="demo.model.dto.PartTimeOrderRes">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="service_id" jdbcType="VARCHAR" property="serviceId"/>
        <result column="service_name" jdbcType="VARCHAR" property="serviceName"/>
        <result column="get_order_date" jdbcType="TIMESTAMP" property="getOrderDate"/>
        <result column="customer_im" jdbcType="VARCHAR" property="customerIm"/>
        <result column="order_number" jdbcType="VARCHAR" property="orderNumber"/>
        <result column="delivery_date" jdbcType="TIMESTAMP" property="deliveryDate"/>
        <result column="customer_mail" jdbcType="VARCHAR" property="customerMail"/>
        <result column="order_content" jdbcType="VARCHAR" property="orderContent"/>
        <result column="order_price" jdbcType="VARCHAR" property="orderPrice"/>
        <result column="pay_state" jdbcType="VARCHAR" property="payState"/>
        <result column="pay_progress" jdbcType="VARCHAR" property="payProgress"/>
        <result column="due_date" jdbcType="TIMESTAMP" property="dueDate"/>
        <result column="due_money" jdbcType="VARCHAR" property="dueMoney"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="recommend_im" jdbcType="VARCHAR" property="recommendIm"/>
        <result column="customer_account" jdbcType="VARCHAR" property="customerAccount"/>
        <result column="refund_way" jdbcType="VARCHAR" property="refundWay"/>
        <result column="refund_money" jdbcType="VARCHAR" property="refundMoney"/>
        <result column="refund_date" jdbcType="TIMESTAMP" property="refundDate"/>
        <result column="refund_remark" jdbcType="VARCHAR" property="refundRemark"/>
        <result column="audit" jdbcType="VARCHAR" property="audit"/>
        <result column="part_name" jdbcType="VARCHAR" property="partName"/>

        <result column="part_id" jdbcType="BIGINT" property="partId"/>
        <result column="pay_date" jdbcType="TIMESTAMP" property="payDate"/>
        <result column="part_qq" jdbcType="VARCHAR" property="partQq"/>
        <result column="submit_state" jdbcType="VARCHAR" property="submitState"/>
        <result column="part_phone" jdbcType="VARCHAR" property="partPhone"/>
        <result column="part_alipay" jdbcType="VARCHAR" property="partAlipay"/>
        <result column="master_hand" jdbcType="BIT" property="masterHand"/>
        <result column="part_money" jdbcType="VARCHAR" property="partMoney"/>
        <result column="deduct" jdbcType="VARCHAR" property="deduct"/>
        <result column="settle_date" jdbcType="TIMESTAMP" property="settleDate"/>
        <result column="part_remark" jdbcType="VARCHAR" property="partRemark"/>
        <result column="part_audit" jdbcType="VARCHAR" property="partAudit"/>
        <result column="part_settle_state" jdbcType="VARCHAR" property="partSettleState"/>
        <result column="finance_remark" jdbcType="VARCHAR" property="financeRemark"/>
        <result column="send_service_name" jdbcType="VARCHAR" property="sendServiceName"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, service_id, service_name, get_order_date, customer_im, order_number, delivery_date,
        customer_mail, order_content, order_price, pay_state, pay_progress, due_date, due_money,
        remark, recommend_im, customer_account, refund_way, refund_money, refund_date, refund_remark,
        audit, part_name
    </sql>

    <sql id="All_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        o.id, o.service_id, r1.username as service_name, o.get_order_date, o.customer_im, o.order_number,
        o.delivery_date,
        o.customer_mail, o.order_content, o.order_price, o.pay_state, o.pay_progress, o.due_date, o.due_money,
        o.remark, o.recommend_im, o.customer_account, o.refund_way, o.refund_money, o.refund_date, o.refund_remark,
        o.audit, o.part_name,pp.pay_date,p.id as part_id, p.part_qq, p.submit_state, p.part_phone, p.part_alipay,
        pu.master_hand,p.part_money,p.deduct,
        p.settle_date,p.part_remark, p.part_audit, p.part_settle_state,
        p.finance_remark,p.send_service_name
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from oa_order
        where id = #{id,jdbcType=BIGINT}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from oa_order
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into oa_order (id, service_id, service_name,
        get_order_date, customer_im, order_number,
        delivery_date, customer_mail, order_content,
        order_price, pay_state, pay_progress,
        due_date, due_money, remark,
        recommend_im, customer_account, refund_way,
        refund_money, refund_date, refund_remark,
        audit, part_name)
        values (#{id,jdbcType=BIGINT}, #{serviceId,jdbcType=VARCHAR}, #{serviceName,jdbcType=VARCHAR},
        #{getOrderDate,jdbcType=TIMESTAMP}, #{customerIm,jdbcType=VARCHAR}, #{orderNumber,jdbcType=VARCHAR},
        #{deliveryDate,jdbcType=TIMESTAMP}, #{customerMail,jdbcType=VARCHAR}, #{orderContent,jdbcType=VARCHAR},
        #{orderPrice,jdbcType=VARCHAR}, #{payState,jdbcType=VARCHAR}, #{payProgress,jdbcType=VARCHAR},
        #{dueDate,jdbcType=TIMESTAMP}, #{dueMoney,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR},
        #{recommendIm,jdbcType=VARCHAR}, #{customerAccount,jdbcType=VARCHAR}, #{refundWay,jdbcType=VARCHAR},
        #{refundMoney,jdbcType=VARCHAR}, #{refundDate,jdbcType=TIMESTAMP}, #{refundRemark,jdbcType=VARCHAR},
        #{audit,jdbcType=VARCHAR}, #{partName,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into oa_order
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="serviceId != null">
                service_id,
            </if>
            <if test="serviceName != null">
                service_name,
            </if>
            <if test="getOrderDate != null">
                get_order_date,
            </if>
            <if test="customerIm != null">
                customer_im,
            </if>
            <if test="orderNumber != null">
                order_number,
            </if>
            <if test="deliveryDate != null">
                delivery_date,
            </if>
            <if test="customerMail != null">
                customer_mail,
            </if>
            <if test="orderContent != null">
                order_content,
            </if>
            <if test="orderPrice != null">
                order_price,
            </if>
            <if test="payState != null">
                pay_state,
            </if>
            <if test="payProgress != null">
                pay_progress,
            </if>
            <if test="dueDate != null">
                due_date,
            </if>
            <if test="dueMoney != null">
                due_money,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="recommendIm != null">
                recommend_im,
            </if>
            <if test="customerAccount != null">
                customer_account,
            </if>
            <if test="refundWay != null">
                refund_way,
            </if>
            <if test="refundMoney != null">
                refund_money,
            </if>
            <if test="refundDate != null">
                refund_date,
            </if>
            <if test="refundRemark != null">
                refund_remark,
            </if>
            <if test="audit != null">
                audit,
            </if>
            <if test="partName != null">
                part_name,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="serviceId != null">
                #{serviceId,jdbcType=VARCHAR},
            </if>
            <if test="serviceName != null">
                #{serviceName,jdbcType=VARCHAR},
            </if>
            <if test="getOrderDate != null">
                #{getOrderDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerIm != null">
                #{customerIm,jdbcType=VARCHAR},
            </if>
            <if test="orderNumber != null">
                #{orderNumber,jdbcType=VARCHAR},
            </if>
            <if test="deliveryDate != null">
                #{deliveryDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerMail != null">
                #{customerMail,jdbcType=VARCHAR},
            </if>
            <if test="orderContent != null">
                #{orderContent,jdbcType=VARCHAR},
            </if>
            <if test="orderPrice != null">
                #{orderPrice,jdbcType=VARCHAR},
            </if>
            <if test="payState != null">
                #{payState,jdbcType=VARCHAR},
            </if>
            <if test="payProgress != null">
                #{payProgress,jdbcType=VARCHAR},
            </if>
            <if test="dueDate != null">
                #{dueDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dueMoney != null">
                #{dueMoney,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=VARCHAR},
            </if>
            <if test="recommendIm != null">
                #{recommendIm,jdbcType=VARCHAR},
            </if>
            <if test="customerAccount != null">
                #{customerAccount,jdbcType=VARCHAR},
            </if>
            <if test="refundWay != null">
                #{refundWay,jdbcType=VARCHAR},
            </if>
            <if test="refundMoney != null">
                #{refundMoney,jdbcType=VARCHAR},
            </if>
            <if test="refundDate != null">
                #{refundDate,jdbcType=TIMESTAMP},
            </if>
            <if test="refundRemark != null">
                #{refundRemark,jdbcType=VARCHAR},
            </if>
            <if test="audit != null">
                #{audit,jdbcType=VARCHAR},
            </if>
            <if test="partName != null">
                #{partName,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update oa_order
        <set>
            <if test="serviceId != null">
                service_id = #{serviceId,jdbcType=VARCHAR},
            </if>
            <if test="serviceName != null">
                service_name = #{serviceName,jdbcType=VARCHAR},
            </if>
            <if test="getOrderDate != null">
                get_order_date = #{getOrderDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerIm != null">
                customer_im = #{customerIm,jdbcType=VARCHAR},
            </if>
            <if test="orderNumber != null">
                order_number = #{orderNumber,jdbcType=VARCHAR},
            </if>
            <if test="deliveryDate != null">
                delivery_date = #{deliveryDate,jdbcType=TIMESTAMP},
            </if>
            <if test="customerMail != null">
                customer_mail = #{customerMail,jdbcType=VARCHAR},
            </if>
            <if test="orderContent != null">
                order_content = #{orderContent,jdbcType=VARCHAR},
            </if>
            <if test="orderPrice != null">
                order_price = #{orderPrice,jdbcType=VARCHAR},
            </if>
            <if test="payState != null">
                pay_state = #{payState,jdbcType=VARCHAR},
            </if>
            <if test="payProgress != null">
                pay_progress = #{payProgress,jdbcType=VARCHAR},
            </if>
            <if test="dueDate != null">
                due_date = #{dueDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dueMoney != null">
                due_money = #{dueMoney,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="recommendIm != null">
                recommend_im = #{recommendIm,jdbcType=VARCHAR},
            </if>
            <if test="customerAccount != null">
                customer_account = #{customerAccount,jdbcType=VARCHAR},
            </if>
            <if test="refundWay != null">
                refund_way = #{refundWay,jdbcType=VARCHAR},
            </if>
            <if test="refundMoney != null">
                refund_money = #{refundMoney,jdbcType=VARCHAR},
            </if>
            <if test="refundDate != null">
                refund_date = #{refundDate,jdbcType=TIMESTAMP},
            </if>
            <if test="refundRemark != null">
                refund_remark = #{refundRemark,jdbcType=VARCHAR},
            </if>
            <if test="audit != null">
                audit = #{audit,jdbcType=VARCHAR},
            </if>
            <if test="partName != null">
                part_name = #{partName,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="demo.model.OrderEntity">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update oa_order
        set service_id = #{serviceId,jdbcType=VARCHAR},
        service_name = #{serviceName,jdbcType=VARCHAR},
        get_order_date = #{getOrderDate,jdbcType=TIMESTAMP},
        customer_im = #{customerIm,jdbcType=VARCHAR},
        order_number = #{orderNumber,jdbcType=VARCHAR},
        delivery_date = #{deliveryDate,jdbcType=TIMESTAMP},
        customer_mail = #{customerMail,jdbcType=VARCHAR},
        order_content = #{orderContent,jdbcType=VARCHAR},
        order_price = #{orderPrice,jdbcType=VARCHAR},
        pay_state = #{payState,jdbcType=VARCHAR},
        pay_progress = #{payProgress,jdbcType=VARCHAR},
        due_date = #{dueDate,jdbcType=TIMESTAMP},
        due_money = #{dueMoney,jdbcType=VARCHAR},
        remark = #{remark,jdbcType=VARCHAR},
        recommend_im = #{recommendIm,jdbcType=VARCHAR},
        customer_account = #{customerAccount,jdbcType=VARCHAR},
        refund_way = #{refundWay,jdbcType=VARCHAR},
        refund_money = #{refundMoney,jdbcType=VARCHAR},
        refund_date = #{refundDate,jdbcType=TIMESTAMP},
        refund_remark = #{refundRemark,jdbcType=VARCHAR},
        audit = #{audit,jdbcType=VARCHAR},
        part_name = #{partName,jdbcType=VARCHAR}
        where id = #{id,jdbcType=BIGINT}
    </update>

    <!-- 这个方法是我自己加的 -->
    <select id="selectAllOrder" resultMap="PartOrderResultMap" parameterType="demo.model.dto.OrderReqVo">
        select
        <include refid="All_Column_List"/>
        from oa_order o left join oa_part_time p on o.order_number = p.order_number
        LEFT JOIN oa_part_user pu ON p.part_qq = pu.part_qq
        LEFT JOIN user_info r1 ON o.service_id = r1.uid
        LEFT JOIN (
        SELECT
        tmp.pay_date,tmp.order_id
        FROM
        (SELECT * FROM oa_pay_process ORDER BY pay_date DESC limit 10000000000) tmp
        GROUP BY tmp.order_id
        ) AS pp ON pp.order_id = o.id
        <where>
            <if test="orderDateReq!=null and orderDateReq!= ''">
                AND `get_order_date` &gt;= #{orderDateStart, jdbcType=TIMESTAMP} AND `get_order_date` &lt;=
                DATE_FORMAT(#{orderDateEnd},'%Y-%m-%d 23:59:59')
            </if>
            <if test="deliveryDateReq!=null and deliveryDateReq!=''">
                AND `delivery_date` &gt;= #{deliveryDateStart, jdbcType=TIMESTAMP} AND `delivery_date` &lt;=
                DATE_FORMAT(#{deliveryDateEnd},'%Y-%m-%d 23:59:59')
            </if>
            <if test="payState != null and payState !='' and payState != '-100'">
                AND pay_state = #{payState,jdbcType=VARCHAR}
            </if>
            <if test="payState == '-100'">
                AND pay_state != '1'
            </if>
            <if test="submitState != null and submitState !=''">
                AND submit_state = #{submitState,jdbcType=VARCHAR}
            </if>
            <if test="masterHand != null">
                AND pu.master_hand = #{masterHand,jdbcType=BIT}
            </if>
            <if test="referrer == true">
                AND recommend_im !='' and recommend_im is not null
            </if>
            <if test="referrer == false">
                AND recommend_im is null OR recommend_im =''
            </if>
            <if test="serviceId != null and serviceId !=''">
                AND service_id = #{serviceId,jdbcType=VARCHAR}
            </if>
            <if test="sendServiceId != null">
                AND p.send_service_id = #{sendServiceId,jdbcType=BIGINT}
            </if>
            <if test="partName != null and partName !=''">
                AND part_name = #{partName,jdbcType=VARCHAR}
            </if>
            <if test="audit != null and audit !=''">
                AND audit = #{audit,jdbcType=VARCHAR}
            </if>
            <if test="partAudit != null and partAudit !=''">
                AND part_audit = #{partAudit,jdbcType=VARCHAR}
            </if>
            <if test="partSettleState != null and partSettleState !=''">
                AND part_settle_state = #{partSettleState,jdbcType=VARCHAR}
            </if>
            <if test="settleDate!=null">
                AND `settle_date` >= DATE_FORMAT(#{settleDate},'%Y-%m-%d 00:00:00')
                AND `settle_date` &lt;= DATE_FORMAT(#{settleDate},'%Y-%m-%d 23:59:59')
            </if>
            <if test="keyWord != null and keyWord !=''">
                AND (customer_im LIKE '%${keyWord}%' OR o.order_number LIKE '%${keyWord}%')
            </if>

        </where>
        order by o.get_order_date desc
    </select>

    <update id="auditOrder" parameterType="demo.model.dto.AuditVo">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update
        <choose>
            <when test="audit !=null and audit != ''">
                oa_order
            </when>
            <otherwise>
                oa_part_time
            </otherwise>
        </choose>
        <set>
            <if test="audit != null">
                audit = #{audit,jdbcType=VARCHAR},
            </if>
            <if test="partAudit != null">
                part_audit = #{partAudit,jdbcType=VARCHAR},
            </if>
            <if test="settle != null">
                part_settle_state = #{settle,jdbcType=VARCHAR},
            </if>
            <if test="submitState != null">
                submit_state = #{submitState,jdbcType=VARCHAR},
            </if>
        </set>
        where id
        in
        <foreach item="item" index="index" collection="ids"
                 open="(" separator="," close=")">
            #{item}
        </foreach>
    </update>

    <select id="selectByOrderNumber" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from oa_order
        where order_number = #{orderNumber,jdbcType=VARCHAR}
    </select>

    <delete id="deleteByPrimaryKeys">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from oa_order
        where id
        in
        <foreach item="item" index="index" collection="ids"
                 open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <select id="selectAllService" resultType="demo.model.dto.ServiceVo">
        select
        o.service_id as serviceId,o.service_name as serviceName,r1.username as userName
        from oa_order o
        LEFT JOIN user_info r1 ON o.service_id = r1.uid
        <where>
            <if test="serviceName != null and serviceName !=''">
                service_name LIKE '%${serviceName}%'
            </if>
            <if test="partName != null and partName !=''">
                AND part_name = #{partName,jdbcType=VARCHAR}
            </if>
            and service_id != ''
        </where>
        GROUP BY service_id
    </select>

    <select id="selectAllSendService" resultType="demo.model.dto.ServiceVo">
        select
        o.id,p.send_service_id as serviceId,p.send_service_name as serviceName,r1.username as userName
        from oa_order o RIGHT join oa_part_time p on o.order_number = p.order_number
        LEFT JOIN user_info r1 ON p.send_service_id = r1.uid
        <where>
            <if test="serviceName != null and serviceName !=''">
                service_name LIKE '%${serviceName}%'
            </if>
            <if test="partName != null and partName !=''">
                AND part_name = #{partName,jdbcType=VARCHAR}
            </if>
            and p.send_service_id != ''
        </where>
        GROUP BY p.send_service_id
    </select>
</mapper>